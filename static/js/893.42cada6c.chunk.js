"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[893],{5893:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var o=t(5917),r=t(7005),i=t(8766),n=t(5797),l=t(607),a=t(1500);const d="myposts_postsBlock__7Rm2g",c="myposts_posts__V84SD";var u=t(1972),h=t(3346),x=t(51),j=t(9559);const p="post_item__OT0dI";var m=t(5212),v=t(393);const f=e=>{let{id:s,message:t,count:o}=e;return(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("img",{src:m.A,alt:"\u0430\u0432\u0430\u0442\u0430\u0440"}),(0,v.jsx)("div",{children:t}),(0,v.jsx)("div",{children:(0,v.jsxs)("span",{children:["like: ",o]})})]})},g=(0,x.d)(10),b=e=>{let{posts:s,addPost:t}=e;const o=s.map((e=>(0,v.jsx)(f,{id:e.id,message:e.message,count:e.count},e.id)));return(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("h3",{children:"My post"}),(0,v.jsx)(A,{onSubmit:e=>{e.newPostText&&t(e.newPostText)}}),(0,v.jsx)("div",{className:c,children:o})]})},A=(0,h.A)({form:"profileAddPostMessageForm"})((e=>(0,v.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)(u.A,{component:j.T,name:"newPostText",placeholder:"Post message...",validate:[x.m,g]})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"add post"})})]}))),S=o.memo(b);const k=(0,r.Ng)((e=>{var s;return{posts:null===(s=e.profilePage)||void 0===s?void 0:s.posts}}),(e=>({addPost:s=>{e((0,a._N)(s))}})))(S),_="profileInfo_descriptionBlock__5jksC",P="profileInfo_mainPhoto__jNKfj",w="profileInfo_contact__DeRrW";var y=t(9270);const N=(0,h.A)({form:"editProfile"})((e=>{let{handleSubmit:s}=e;return(0,v.jsxs)("form",{onSubmit:s,children:[(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Save"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name: "}),(0,v.jsx)(u.A,{type:"text",name:"fullName",placeholder:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",component:j.p,validate:[x.m]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job:"})," ",(0,v.jsx)(u.A,{type:"checkbox",name:"lookingForAJob",component:j.p})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills: "}),(0,v.jsx)(u.A,{type:"text",name:"skills",placeholder:"\u0432\u0430\u0448\u0438 \u0441\u043a\u0438\u043b\u044b",component:j.T,validate:[x.m]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me: "}),(0,v.jsx)(u.A,{type:"text",name:"aboutMe",placeholder:"About me",component:j.T,validate:[x.m]})]})]})})),U=e=>{let{status:s,updateUserStatus:t}=e;const[r,i]=(0,o.useState)(!1),[n,l]=(0,o.useState)(s),a=(0,o.useRef)(null);(0,o.useEffect)((()=>{l(s)}),[s]),(0,o.useEffect)((()=>{r&&a.current&&a.current.focus()}),[r]);const d=()=>{i(!0)};return(0,v.jsx)(v.Fragment,{children:r?(0,v.jsx)("div",{children:(0,v.jsx)("input",{ref:a,value:n,onBlur:()=>{i(!1),t(n)},onChange:e=>{l(e.target.value)}})}):(0,v.jsx)("div",{children:n?(0,v.jsx)("span",{onClick:d,children:n}):(0,v.jsxs)("span",{onClick:d,children:[(0,v.jsx)("b",{children:"Status:"})," \u041d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"]})})})},T=e=>{let{profile:s,status:t,isOwner:r,savePhoto:i,updateUserStatus:n}=e;const[l,a]=(0,o.useState)(!1);if(!s)return(0,v.jsx)(y.Z,{});return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:_,children:[(0,v.jsx)("img",{src:s.photos.large?s.photos.large:m.A,alt:"big photo",className:P}),r?"":(0,v.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files.length>0?i(e.target.files[0]):console.error("No file selected")}}),l?(0,v.jsx)(N,{onSubmit:e=>{console.log(e)}}):(0,v.jsx)(C,{profile:s,isOwner:r,goToEditMode:()=>{a(!0)}}),(0,v.jsx)(U,{status:t,updateUserStatus:n})]})})},C=e=>{let{profile:s,isOwner:t,goToEditMode:o}=e;return s?(0,v.jsxs)(v.Fragment,{children:[!t&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{onClick:o,children:"edit"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name: "}),s.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job:"})," ",s.lookingForAJob?"Yes":"No"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills: "}),s.lookingForAJob]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me: "}),s.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),": ",Object.keys(s.contacts).map((e=>{const t=s.contacts[e];return(0,v.jsx)(F,{contactTitle:e,contactValue:t},e)}))," "]})]}):(0,v.jsx)(y.Z,{})},F=e=>{let{contactTitle:s,contactValue:t}=e;return(0,v.jsxs)("div",{className:w,children:[(0,v.jsx)("b",{children:s}),": ",t]})},I=e=>{let{profile:s,status:t,savePhoto:o,isOwner:r,updateUserStatus:i}=e;return(0,v.jsxs)("div",{children:[(0,v.jsx)(T,{profile:s,status:t,updateUserStatus:i,isOwner:r,savePhoto:o}),(0,v.jsx)(k,{})]})};const M=(0,n.Zz)((0,r.Ng)((e=>{var s,t,o,r;return{profile:null===(s=e.profilePage)||void 0===s?void 0:s.profile,status:null===(t=e.profilePage)||void 0===t?void 0:t.status,autorizedUserId:null===(o=e.auth)||void 0===o?void 0:o.userId,isAuth:null===(r=e.auth)||void 0===r?void 0:r.isAuth}}),{getUserProfile:a.VM,getUserStatus:a.CD,updateUserStatus:a.pU,savePhoto:a.Ah}),l.$)((e=>{const{getUserProfile:s,getUserStatus:t,updateUserStatus:r,savePhoto:n,profile:l,status:a,isAuth:d,autorizedUserId:c}=e,{userId:u}=(0,i.g)();return(0,o.useEffect)((()=>{(async()=>{try{if(!u){if(!c)throw new Error("ID \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442");return void s(c)}s(u),t(u)}catch(e){}})()}),[u,s,t]),(0,v.jsx)(I,{profile:l,status:a,updateUserStatus:r,isOwner:!!u,savePhoto:n})}))},607:(e,s,t)=>{t.d(s,{$:()=>l});t(5917);var o=t(8766),r=t(7005),i=t(393);let n=e=>{var s;return{isAuth:null===(s=e.auth)||void 0===s?void 0:s.isAuth}};function l(e){return(0,r.Ng)(n)((s=>{let{isAuth:t,...r}=s;return t?(0,i.jsx)(e,{...r}):(0,i.jsx)(o.rd,{to:"/login"})}))}}}]);
//# sourceMappingURL=893.42cada6c.chunk.js.map